<div class="card__meta" id="<%= dom_id(card, :meta) %>">
  <div class="card__meta-avatars card__meta-avatars--author">
    <%= avatar_tag card.creator, tabindex: (local_assigns.key?(:preview) && local_assigns[:preview]) ? -1 : 0 %>
  </div>

  <span class="card__meta-text card__meta-text--added">
    <%= card_drafted_or_added(card) %> <%= local_datetime_tag(card.created_at, style: :daysago) %>
  </span>

  <span class="card__meta-text card__meta-text--author">
    <%= t("cards.display.by") %> <strong><%= card.creator.familiar_name %></strong>
  </span>

  <span class="card__meta-text card__meta-text--updated overflow-ellipsis">
    <%= icon_tag "refresh--meta" %>
    <%= t("cards.display.updated") %>
    <%= local_datetime_tag(card.last_active_at, style: :daysago) %>
  </span>

  <span class="card__meta-text card__meta-text--assignees overflow-ellipsis">
    <%= icon_tag "arrow-right" if card.assignees.any? %>
    <%= card.assignees.any? ? t("cards.display.assigned_to") : t("cards.display.not_assigned") %>
    <%= card.assignees.map { |assignee| "<strong>#{h assignee.familiar_name}</strong>" }.to_sentence.html_safe %>
  </span>

  <% if card.due_on.present? %>
    <span class="card__meta-text card__meta-text--due <%= 'card__meta-text--overdue' if card.overdue? %>">
      <%= icon_tag "refresh--meta" %>
      <%= t("cards.display.due") %>
      <strong><%= l(card.due_on, format: :short) %></strong>
    </span>
  <% end %>

  <div class="card__meta-avatars card__meta-avatars--assignees">
    <%= yield %>
  </div>
</div>

